# GB PHP Laravel
## Задание 4 по теме: Запросы пользователя и класс Request. Класс Response в фреймворке Laravel. Функциональное тестирование приложения

### 1. Создать форму для получения данных от пользователя. Это должна быть форма добавления новости или форма заказа на получение выгрузки данных.
- созданы 2 формы: добавление новости и добавление новостной рубрики. 
Можно тут же проверить: После добавления Рубрики осуществляется переход ко списку рубрик, 
а после добавления новости - переход в новости той рубрики, куда была добавлена только, что новость. 

**- вопрос-проблема:** admin\addNews.blade.php - input для isPrivate переделан на checkbox. Но, форма теперь считает, что галка должна быть обязательной!
  если галку не ставить, то форма не будет сохраняться, будет ругаться -  нужно установить галку.
  если убрать required, то форма не будет проверять галку, но и не будет передавать в POSTе массив с ключом "isPrivate".
  вроде пытался все контроли отключить, но в результате запутался и починить таки не смог - оставил пока галку "обязательной" :(
  
- добавил форму выгрузки данных (news и category) как в json-формате, так и формате Excel. выгружаются!
     (см. картику и файлы)
### 2. Организуйте прием данный о новой новости и сохраните в хранилище в виде файла. Т.е. переделать источник новостей из массива в файл (хранить в json-формате).
- сохраняются и читаются данные из storage, хранится в json
- для Моделей News и Category используются одинаковые методы чтения/записи данны, поэтому решил использовать для них trait - DataFromToFile
И обнаружил, что ларавел не любит кастомные трейты, команды ```` php artisan make:trait DataFromToFile ```` отсутствует!
(пришлось сделать трейт вручную)

**Вопрос:** это концепция такая? Баг или фича?

### 3. Добавить тесты на созданные классы и страницы.

- в тесте Feature/mawNewsTest: 
 --  проверил экспорт в json, проверка заголовка
 -- проверил осуществляется ли  редирект на странице
 -- и проверил на содержимое основные страницы, тесты прошли.
 
- в тесте Unit/mawModelTest :
 -- проверил работу каждую из моделей.
 Надо отметить, что тесты не прошли (см. картинку) ибо тест не мог найти класс \File, но я в трейте его прописал напрямую,
 после чего тест не мог узнать путь storage_path(), где лежат данные
 
 Думаю правильнее всё же использовать родной ларавелевский Storage (пока только мельком просмотрел) вместо \File,
  а для тестов с участием Storage там даже есть такие штуки как fake() и можно использовать Mocking (кажется).
   


